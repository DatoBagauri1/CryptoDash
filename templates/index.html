{% extends "base.html" %}

{% block content %}
<div class="container my-5">
    <!-- Hero Section -->
    <div class="row align-items-center mb-5">
        <div class="col-lg-6">
            <h1 class="display-4 fw-bold text-white mb-3">
                Your Ultimate <span class="text-warning">Crypto</span> Companion
            </h1>
            <p class="lead text-muted mb-4">
                Monitor live crypto prices, analyze market trends, track sentiment, and stay updated with the latest news - all in one place.
            </p>
            <div class="d-flex gap-3">
                {% if not current_user.is_authenticated %}
                <a href="{{ url_for('auth.register') }}" class="btn btn-warning btn-lg">
                    <i class="fas fa-rocket me-2"></i>Get Started
                </a>
                {% else %}
                <a href="{{ url_for('dashboard.dashboard') }}" class="btn btn-warning btn-lg">
                    <i class="fas fa-chart-line me-2"></i>Dashboard
                </a>
                {% endif %}
                <a href="{{ url_for('dashboard.dashboard') }}" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-chart-line me-2"></i>Explore Dashboard
                </a>
            </div>
        </div>
        <div class="col-lg-6 text-center">
            <div class="crypto-hero-graphic">
                <i class="fas fa-coins fa-10x text-warning opacity-75"></i>
            </div>
        </div>
    </div>

    <!-- Features Grid -->
    <div class="row g-4 mb-5">
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 bg-dark border-secondary">
                <div class="card-body text-center">
                    <i class="fas fa-briefcase fa-3x text-warning mb-3"></i>
                    <h5 class="card-title">Portfolio Tracking</h5>
                    <p class="card-text text-muted">Track your crypto holdings with real-time values and profit/loss calculations.</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 bg-dark border-secondary">
                <div class="card-body text-center">
                    <i class="fas fa-chart-line fa-3x text-success mb-3"></i>
                    <h5 class="card-title">Live Prices</h5>
                    <p class="card-text text-muted">Monitor real-time cryptocurrency prices, trends, and market data.</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 bg-dark border-secondary">
                <div class="card-body text-center">
                    <i class="fas fa-image fa-3x text-info mb-3"></i>
                    <h5 class="card-title">NFT Gallery</h5>
                    <p class="card-text text-muted">View NFTs from any wallet address with collection stats and floor prices.</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 bg-dark border-secondary">
                <div class="card-body text-center">
                    <i class="fas fa-newspaper fa-3x text-danger mb-3"></i>
                    <h5 class="card-title">Crypto News</h5>
                    <p class="card-text text-muted">Stay updated with the latest cryptocurrency news and market insights.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Market Overview -->
    <div class="row mb-5">
        <div class="col-12">
            <h2 class="h3 mb-4">
                <i class="fas fa-fire text-warning me-2"></i>Market Overview
            </h2>
        </div>
    </div>

    <!-- Fear & Greed Index -->
    {% if fear_greed %}
    <div class="row mb-4">
        <div class="col-md-6 col-lg-4">
            <div class="card bg-dark border-secondary">
                <div class="card-body text-center">
                    <h6 class="card-title text-muted">Fear & Greed Index</h6>
                    <div class="display-4 fw-bold mb-2">{{ fear_greed.value }}</div>
                    <div class="badge 
                        {% if fear_greed.value|int <= 25 %}bg-danger
                        {% elif fear_greed.value|int <= 45 %}bg-warning
                        {% elif fear_greed.value|int <= 55 %}bg-secondary
                        {% elif fear_greed.value|int <= 75 %}bg-success
                        {% else %}bg-success{% endif %} fs-6">
                        {{ fear_greed.value_classification }}
                    </div>
                    <p class="text-muted small mt-2">{{ fear_greed.timestamp }}</p>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Trending Coins -->
    {% if trending_coins %}
    <div class="row mb-4">
        <div class="col-12">
            <h4 class="mb-3">
                <i class="fas fa-trending-up text-success me-2"></i>Trending Coins
            </h4>
            <div class="row g-3">
                {% for coin_data in trending_coins[:6] %}
                {% set coin = coin_data.item %}
                <div class="col-md-6 col-lg-4">
                    <div class="card bg-dark border-secondary h-100">
                        <div class="card-body d-flex align-items-center">
                            <img src="{{ coin.small }}" alt="{{ coin.name }}" class="rounded-circle me-3" width="40" height="40">
                            <div>
                                <h6 class="mb-1">{{ coin.name }}</h6>
                                <p class="text-muted small mb-0">{{ coin.symbol.upper() }}</p>
                                <span class="badge bg-secondary small">Rank #{{ coin.market_cap_rank or 'N/A' }}</span>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Top Coins Preview -->
    {% if top_coins %}
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h4>
                    <i class="fas fa-crown text-warning me-2"></i>Top Cryptocurrencies
                </h4>
                <a href="{{ url_for('dashboard.dashboard') }}" class="btn btn-outline-warning">
                    View All <i class="fas fa-arrow-right ms-1"></i>
                </a>
            </div>
            
            <div class="card bg-dark border-secondary">
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-dark table-hover mb-0">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Coin</th>
                                    <th class="text-end">Price</th>
                                    <th class="text-end">24h Change</th>
                                    <th class="text-end">Market Cap</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for coin in top_coins[:10] %}
                                <tr>
                                    <td>{{ coin.market_cap_rank }}</td>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <img src="{{ coin.image }}" alt="{{ coin.name }}" class="rounded-circle me-2" width="24" height="24">
                                            <div>
                                                <div class="fw-medium">{{ coin.name }}</div>
                                                <small class="text-muted">{{ coin.symbol.upper() }}</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-end">${{ "%.2f"|format(coin.current_price) if coin.current_price else 'N/A' }}</td>
                                    <td class="text-end">
                                        {% if coin.price_change_percentage_24h %}
                                        <span class="badge {% if coin.price_change_percentage_24h > 0 %}bg-success{% else %}bg-danger{% endif %}">
                                            {% if coin.price_change_percentage_24h > 0 %}+{% endif %}{{ "%.2f"|format(coin.price_change_percentage_24h) }}%
                                        </span>
                                        {% else %}
                                        <span class="text-muted">N/A</span>
                                        {% endif %}
                                    </td>
                                    <td class="text-end">
                                        {% if coin.market_cap %}
                                        ${{ "{:,.0f}".format(coin.market_cap) }}
                                        {% else %}
                                        <span class="text-muted">N/A</span>
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
